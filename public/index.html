<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>vs-tree2.0</title>
  <link rel="stylesheet" href="./static/css/index.css">
  <style>
    .tree-action a{
      margin-left: 8px;
      color: #2a8ae2;
      font-size: 12px;
    }
  </style>
</head>

<body>
  <div id="tree"></div>
  <button id="checked" type="button">获取选中元素</button>
  <button id="getNodeById" type="button">根据ID获取节点</button>
  <button id="clearChecked" type="button">清除选中</button>
  <script src="../dist/bundle.js"></script>
  <script>
    console.time('create:data')
    function add(parentId, name) {
      const list = []
      for (var i = 0; i < 10; i++) {
        list.push({ id: `${parentId}${i}`, name: name + i, parentId: parentId })
      }
      return list
    }
    const data = {
      id: '1', name: 'zhangsan', parentId: '-1', children: [
        { id: '100', name: 'wangwu', parentId: '1' },
        {
          id: '101', name: 'zhaoliu', parentId: '1', children: add('101', 'zhaoliu')
        },
        {
          id: '102', name: 'huahua', parentId: '1', children: add('102', 'huahua')
        },
        {
          id: '103', name: 'oo', parentId: '1'
        },
        {
          id: '104', name: 'oo', parentId: '1'
        },
        {
          id: '105', name: 'oo', parentId: '1'
        },
        {
          id: '106', name: 'oo', parentId: '1'
        },
        {
          id: '107', name: 'oo', parentId: '1'
        },
        {
          id: '108', name: 'oo', parentId: '1'
        },
        {
          id: '109', name: 'oo', parentId: '1'
        },
        {
          id: '110', name: 'oo', parentId: '1'
        },
        {
          id: '111', name: 'oo', parentId: '1'
        },
        {
          id: '112', name: 'oo', parentId: '1'
        },
        {
          id: '113', name: 'oo', parentId: '1'
        },
        {
          id: '114', name: 'oo', parentId: '1'
        },
        {
          id: '115', name: 'oo', parentId: '1'
        },
        {
          id: '116', name: 'oo', parentId: '1'
        },
        {
          id: '117', name: 'oo', parentId: '1'
        },
        {
          id: '118', name: 'oo', parentId: '1'
        },
        {
          id: '119', name: 'oo', parentId: '1'
        },
        {
          id: '120', name: 'oo', parentId: '1'
        },
        {
          id: '121', name: 'oo', parentId: '1'
        },
        {
          id: '122', name: 'oo22', parentId: '1',
          children: add('122', '0022_')
        },
      ]
    }
    console.timeEnd('create:data')
    console.time('render:tree');
    const tree = new vsTree.default('#tree', {
      data: data,
      showRoot: false,
      showCheckbox: true,	
      max: 0,
      highlightCurrent: false,
      indent: 12, // 缩进
      showCount: 30,
      itemHeight: 26,
      disabledKeys: ["104", "105"],
      checkedKeys: ["102", "100", "104"],
      expandKeys: ["122"],
      sort: true, // 按选中先后顺序排序
      click: function(event, node, type) {
        console.log(node, 'click', type);
      },
      // 复选框被点击时出发
      check: function(event, node) {
        console.log(node, 'onCheck');
      },
      change: function(node) {
        console.log(node);
      },
      limitAlert: function () {
        console.log('超过最大');
      },
      renderContent: function(node) {
        return `<div class="tree-action">
          <a tree-click="edit">eidt</a>
          <a tree-click="remove">remove</a>
        </div>`
      }
    });
    console.timeEnd('render:tree');

    document.getElementById("checked").onclick = function () {
      console.log(tree);
      console.log(tree.getCheckedNodes());
    }

    document.getElementById("getNodeById").onclick = function () {
      console.log(tree.getNodeById("102164"));
      tree.getNodeById("102164").setChecked(true);
    }

    document.getElementById("clearChecked").onclick = function () {
      ["100", "104"].forEach(id => {
        tree.getNodeById(id).setChecked(false);
      });
    }
  </script>
</body>

</html>